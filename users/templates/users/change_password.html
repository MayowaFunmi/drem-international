{% extends 'users/base.html' %}
{% load crispy_forms_tags %}

{% block title %}Change Password Form{% endblock title %}


{% block content %}
    <div>
        <h3>Change Password Form.</h3>
        <div>
            <h4>Hint:</h4>
            <ul>
                <li>Your password can’t be too similar to your other personal information like your username.</li>
                <li>Your password must contain at least 8 characters.</li>
                <li>Your password can’t be a commonly used password.</li>
                <li>Your password can’t be entirely numeric.</li>
                <li>You can't use your former password(s) again.</li>
            </ul>
        </div>
        <form method="POST">
            {% csrf_token %}
            <div class="input-group flex-nowrap">
                <span class="input-group-text" style="margin-right: 15px; width:180px; margin_bottom: 15px;">
                    Old Password
                </span>
                {{ form.old_password }}
            </div>
            <input type="checkbox" onclick="showOldPassword()">Show Password
            <br>
            <br>

            <div class="input-group flex-nowrap">
                <span class="input-group-text" style="margin-right: 15px; width:180px;">
                    New Password
                </span>
                {{ form.new_password1 }}
            </div>
            <input type="checkbox" onclick="showNewPassword()">Show Password
            <br>
            <br>

            <div class="input-group flex-nowrap">
                <span class="input-group-text" style="margin-right: 15px; width:180px;">
                    Confirm Password
                </span>
                {{ form.new_password2 }}
            </div>
            <input type="checkbox" onclick="showConfirmPassword()">Show Password
            <br>
            <br>

            <button class="btn btn-success" type="submit">
                Save Changes
            </button>

            <div class="form-group">
                {% if messages %}
                    {% for message in messages %}
                        {% if message.tags == 'error' %}
                            <div class="alert alert-danger" style="margin-top:10px">{{ message }}</div>
                        {% endif %}
                        {% if message.tags == 'success' %}
                            <div class="alert alert-success" style="margin-top:10px">{{ message }}</div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </div>
        </form>
    </div>

    <script>
        function showOldPassword() {
            var x = document.getElementById('id_old_password');
            if (x.type === 'password') {
                x.type = 'text';
            } else {
                x.type = 'password'
            }
        }

        function showNewPassword() {
            var x = document.getElementById('id_new_password1');
            if (x.type === 'password') {
                x.type = 'text';
            } else {
                x.type = 'password'
            }
        }

        function showConfirmPassword() {
            var x = document.getElementById('id_new_password2');
            if (x.type === 'password') {
                x.type = 'text';
            } else {
                x.type = 'password'
            }
        }
    </script>
{% endblock %}